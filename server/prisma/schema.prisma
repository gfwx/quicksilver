generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  email             String    @unique
  createdAt         DateTime  @default(now())
  emailVerified     Boolean
  firstName         String
  id                String    @id
  lastName          String
  lastSignInAt      DateTime?
  profilePictureUrl String?
  updatedAt         DateTime  @updatedAt
  role              String
  File              File[]
  projects          Project[]
}

model File {
  filename      String
  encoding      String
  originalname  String
  status        String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  userId        String
  size          Int
  id            String   @id
  projectId     String
  parentProject Project  @relation(fields: [projectId], references: [id])
  uploadedBy    User     @relation(fields: [userId], references: [id])
}

model Project {
  id             String   @id
  projectTitle   String
  projectContext String
  createdAt      DateTime @default(now())
  updatedAt      DateTime
  projectTags    String[]
  userId         String
  chatCount      Int      @default(0)
  fileCount      Int      @default(0)
  Chats          Chats[]
  files          File[]
  user           User     @relation(fields: [userId], references: [id])
}

model Chats {
  id        String  @id
  chatTitle String
  projectId String
  project   Project @relation(fields: [projectId], references: [id])
}
